<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>gke - Google Kubernetes Engine &mdash; Hydroplane  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/autodoc_pydantic.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Defining Secrets" href="../secrets.html" />
    <link rel="prev" title="eks - Amazon EKS" href="eks.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Hydroplane
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-hydroplane.html">Interacting with Hydroplane</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processes.html">Defining Processes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../runtimes.html">Runtimes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="docker.html"><code class="docutils literal notranslate"><span class="pre">docker</span></code> - Docker (Single-Node) Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="eks.html"><code class="docutils literal notranslate"><span class="pre">eks</span></code> - Amazon EKS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">gke</span></code> - Google Kubernetes Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-configuration">Example Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quickstart">Quickstart</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-0-set-up-your-environment">Step 0: Set Up Your Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1-create-a-vpc-if-needed">Step 1: Create a VPC If Needed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-create-a-gke-cluster">Step 2: Create a GKE Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-configure-hydroplane">Step 3: Configure Hydroplane</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-run-hydroplane">Step 4: Run Hydroplane</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-and-configuration-details">Implementation and Configuration Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#authenticating-with-gcp">Authenticating with GCP</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../secrets.html">Defining Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secret_stores.html">Secret Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architectural Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Example Process Specs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Hydroplane</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../runtimes.html">Runtimes</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">gke</span></code> - Google Kubernetes Engine</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/runtimes/gke.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="gke-google-kubernetes-engine">
<h1><a class="toc-backref" href="#id1"><code class="docutils literal notranslate"><span class="pre">gke</span></code> - Google Kubernetes Engine</a><a class="headerlink" href="#gke-google-kubernetes-engine" title="Permalink to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">gke</span></code> runtime integrates with GKE, GCP’s managed Kubernetes offering.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#gke-google-kubernetes-engine" id="id1"><code class="docutils literal notranslate"><span class="pre">gke</span></code> - Google Kubernetes Engine</a></p>
<ul>
<li><p><a class="reference internal" href="#settings" id="id2">Settings</a></p></li>
<li><p><a class="reference internal" href="#example-configuration" id="id3">Example Configuration</a></p></li>
<li><p><a class="reference internal" href="#quickstart" id="id4">Quickstart</a></p>
<ul>
<li><p><a class="reference internal" href="#step-0-set-up-your-environment" id="id5">Step 0: Set Up Your Environment</a></p></li>
<li><p><a class="reference internal" href="#step-1-create-a-vpc-if-needed" id="id6">Step 1: Create a VPC If Needed</a></p></li>
<li><p><a class="reference internal" href="#step-2-create-a-gke-cluster" id="id7">Step 2: Create a GKE Cluster</a></p></li>
<li><p><a class="reference internal" href="#step-3-configure-hydroplane" id="id8">Step 3: Configure Hydroplane</a></p></li>
<li><p><a class="reference internal" href="#step-4-run-hydroplane" id="id9">Step 4: Run Hydroplane</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#implementation-and-configuration-details" id="id10">Implementation and Configuration Details</a></p>
<ul>
<li><p><a class="reference internal" href="#authenticating-with-gcp" id="id11">Authenticating with GCP</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="settings">
<h2><a class="toc-backref" href="#id2">Settings</a><a class="headerlink" href="#settings" title="Permalink to this heading"></a></h2>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.runtimes.gke.</span></span><span class="sig-name descname"><span class="pre">Settings</span></span><a class="headerlink" href="#hydroplane.runtimes.gke.Settings" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings.runtime_type">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">runtime_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'gke'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gke'</span></em><a class="headerlink" href="#hydroplane.runtimes.gke.Settings.runtime_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings.cluster_id">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cluster_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.runtimes.gke.Settings.cluster_id" title="Permalink to this definition"></a></dt>
<dd><p>the cluster ID of the GKE cluster</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings.namespace">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">namespace</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#hydroplane.runtimes.gke.Settings.namespace" title="Permalink to this definition"></a></dt>
<dd><p>the Kubernetes namespace that Hydroplane will create pods and services within</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings.project">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">project</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.runtimes.gke.Settings.project" title="Permalink to this definition"></a></dt>
<dd><p>the project in which the GKE cluster is located</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.runtimes.gke.Settings.region">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">region</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.runtimes.gke.Settings.region" title="Permalink to this definition"></a></dt>
<dd><p>the GCP region in whcih the cluster is located</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="example-configuration">
<h2><a class="toc-backref" href="#id3">Example Configuration</a><a class="headerlink" href="#example-configuration" title="Permalink to this heading"></a></h2>
<p>Here’s an example of a configuration file that uses the <code class="docutils literal notranslate"><span class="pre">gke</span></code> runtime. This runtime doesn’t need access to a secret store, so we’re using the <code class="docutils literal notranslate"><span class="pre">none</span></code> secret store here.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">secret_store</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secret_store_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">none</span>

<span class="nt">runtime</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runtime_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gke</span>
<span class="w">    </span><span class="nt">cluster_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hydroplane-test-cluster</span>
<span class="w">    </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hydro-development</span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart">
<h2><a class="toc-backref" href="#id4">Quickstart</a><a class="headerlink" href="#quickstart" title="Permalink to this heading"></a></h2>
<p>We’ll assume that we’re creating a cluster named <code class="docutils literal notranslate"><span class="pre">hydroplane-test-cluster</span></code> in the <code class="docutils literal notranslate"><span class="pre">us-central1</span></code> region, running within a VPC named <code class="docutils literal notranslate"><span class="pre">hydroplane-vpc</span></code>, inside a project named <code class="docutils literal notranslate"><span class="pre">test-project</span></code>. Substitute your cluster, VPC and project name(s) as appropriate.</p>
<div class="section" id="step-0-set-up-your-environment">
<h3><a class="toc-backref" href="#id5">Step 0: Set Up Your Environment</a><a class="headerlink" href="#step-0-set-up-your-environment" title="Permalink to this heading"></a></h3>
<p>Make sure you have the Google Cloud command-line tool (<code class="docutils literal notranslate"><span class="pre">gcloud</span></code>) installed. You can install it by following the instructions <a class="reference external" href="https://cloud.google.com/sdk/docs/install">here</a>.</p>
<p>Once you’ve got <code class="docutils literal notranslate"><span class="pre">gcloud</span></code> installed, you’ll need to authenticate:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># First, we&#39;ll login as you.</span>
gcloud<span class="w"> </span>auth<span class="w"> </span>login

<span class="c1"># Next, we&#39;ll make sure you&#39;ve got a project configured, so that you</span>
<span class="c1"># don&#39;t have to specify which project you&#39;re referring to every time</span>
<span class="c1"># you run a command.</span>
gcloud<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>project<span class="w"> </span>test-project

<span class="c1"># Finally, we&#39;ll configure some local Application Default Credentials</span>
<span class="c1"># that Hydroplane can use to act on your behalf.</span>
gcloud<span class="w"> </span>auth<span class="w"> </span>application-default<span class="w"> </span>login
</pre></div>
</div>
</div>
<div class="section" id="step-1-create-a-vpc-if-needed">
<h3><a class="toc-backref" href="#id6">Step 1: Create a VPC If Needed</a><a class="headerlink" href="#step-1-create-a-vpc-if-needed" title="Permalink to this heading"></a></h3>
<p>Your GKE cluster will need a VPC to run within. If you don’t already have a VPC configured in your GCP project, you can create a VPC by following <a class="reference external" href="https://cloud.google.com/vpc/docs/create-modify-vpc-networks#create-auto-network">these instructions</a>, or run the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud<span class="w"> </span>compute<span class="w"> </span>networks<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>hydroplane-vpc<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--subnet-mode<span class="o">=</span>auto<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mtu<span class="o">=</span><span class="m">1460</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--bgp-routing-mode<span class="o">=</span>regional
</pre></div>
</div>
<p>We’ll assume that the VPC is named <code class="docutils literal notranslate"><span class="pre">hydroplane-vpc</span></code>, and was configured in auto mode (so all its subnets are also called <code class="docutils literal notranslate"><span class="pre">hydroplane-vpc</span></code>).</p>
<p>By default, VPC networks aren’t routable from outside GCP. If you want to connect to your public processes from outside GCP, you’ll need to poke a hole in the VPC’s firewall.</p>
<p>To start, we’ll poke a hole in the firewall for our IP address. To do that, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud<span class="w"> </span>compute<span class="w"> </span>firewall-rules<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>allow-my-ip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--direction<span class="o">=</span>INGRESS<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--priority<span class="o">=</span><span class="m">999</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network<span class="o">=</span>hydroplane-vpc<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--action<span class="o">=</span>ALLOW<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--rules<span class="o">=</span>all<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-ranges<span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>https://api.ipify.org<span class="k">)</span>/32
</pre></div>
</div>
<p>If you want to add more source ranges, you can add more firewall rules similar to the one declared above, setting <code class="docutils literal notranslate"><span class="pre">--source-ranges</span></code> to whatever ranges you want to open.</p>
</div>
<div class="section" id="step-2-create-a-gke-cluster">
<h3><a class="toc-backref" href="#id7">Step 2: Create a GKE Cluster</a><a class="headerlink" href="#step-2-create-a-gke-cluster" title="Permalink to this heading"></a></h3>
<p>GCP provides a service called <a class="reference external" href="https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#modes">Autopilot mode</a> that manages most of the minutiae of setting up a Kubernetes cluster for you. Follow the instructions in <a class="reference external" href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-an-autopilot-cluster">this document</a> to create a cluster in Autopilot mode, or just run the following, filling in the blanks as appropriate:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activate GCP&#39;s container and container registry services if they aren&#39;t already activated</span>
<span class="c1"># (which usually happens automatically when you interact with them via the console)</span>
gcloud<span class="w"> </span>services<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>container.googleapis.com
gcloud<span class="w"> </span>services<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>containerregistry.googleapis.com

gcloud<span class="w"> </span>container<span class="w"> </span>clusters<span class="w"> </span>create-auto<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;hydroplane-test-cluster&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--region<span class="w"> </span><span class="s2">&quot;us-central1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--release-channel<span class="w"> </span><span class="s2">&quot;regular&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network<span class="w"> </span><span class="s2">&quot;projects/test-project/global/networks/hydroplane-vpc&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--subnetwork<span class="w"> </span><span class="s2">&quot;projects/test-project/regions/us-central1/subnetworks/hydroplane-vpc&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cluster-ipv4-cidr<span class="w"> </span><span class="s2">&quot;/17&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--services-ipv4-cidr<span class="w"> </span><span class="s2">&quot;/22&quot;</span>

<span class="c1"># (Optional) if you want to use kubectl with your cluster, configure it:</span>
gcloud<span class="w"> </span>components<span class="w"> </span>install<span class="w"> </span>gke-gcloud-auth-plugin
gcloud<span class="w"> </span>container<span class="w"> </span>clusters<span class="w"> </span>get-credentials<span class="w"> </span>--region<span class="w"> </span>us-central1<span class="w"> </span>hydroplane-test-cluster
</pre></div>
</div>
</div>
<div class="section" id="step-3-configure-hydroplane">
<h3><a class="toc-backref" href="#id8">Step 3: Configure Hydroplane</a><a class="headerlink" href="#step-3-configure-hydroplane" title="Permalink to this heading"></a></h3>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">gke.yml</span></code> with the following contents (filling in the blanks):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">secret_store</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secret_store_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">none</span>

<span class="nt">runtime</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runtime_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gke</span>
<span class="w">    </span><span class="nt">cluster_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hydroplane-test-cluster</span>
<span class="w">    </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-project</span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-run-hydroplane">
<h3><a class="toc-backref" href="#id9">Step 4: Run Hydroplane</a><a class="headerlink" href="#step-4-run-hydroplane" title="Permalink to this heading"></a></h3>
<p>You should now have everything you need. Let’s launch Hydroplane:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bin/hydroplane<span class="w"> </span>-c<span class="w"> </span>gke.yml
</pre></div>
</div>
<p>In a separate terminal, from the root of the <code class="docutils literal notranslate"><span class="pre">hydroplane</span></code> repo, let’s make sure we can list processes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bin/hpctl<span class="w"> </span>list
</pre></div>
</div>
<p>You should get back an empty list, because we haven’t launched any processes yet.</p>
<p>Let’s try a simple example to make sure we can start something and access it remotely:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bin/hpctl<span class="w"> </span>start<span class="w"> </span>examples/nginx.json
</pre></div>
</div>
<p>If you list processes with <code class="docutils literal notranslate"><span class="pre">bin/hpctl</span> <span class="pre">list</span></code> now, you should see something like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;process_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nginx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;socket_addresses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;34.217.208.197&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">31491</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_public&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-12-01T22:40:33+00:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RUNNING&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that the process is exposing a single public port. In this example, it’s <code class="docutils literal notranslate"><span class="pre">34.217.208.197:31491</span></code>, but your host and port will be different.</p>
<p>If you have <code class="docutils literal notranslate"><span class="pre">jq</span></code> installed, are on macOS, and want to open that server with a one-liner:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>open<span class="w"> </span>http://<span class="k">$(</span>bin/hpctl<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;(.[0].socket_addresses[0].host + \&quot;:\&quot; + (.[0].socket_addresses[0].port|tostring))&quot;</span><span class="k">)</span>
</pre></div>
</div>
<p>Otherwise, you can copy-paste the host and port into a browser window. Either way, you should see an <a class="reference external" href="https://www.nginx.com/">nginx</a> “hello world” page.</p>
<p>Now that we’ve verified that everything is working, let’s stop the process:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bin/hpctl<span class="w"> </span>stop<span class="w"> </span>nginx
</pre></div>
</div>
</div>
</div>
<div class="section" id="implementation-and-configuration-details">
<h2><a class="toc-backref" href="#id10">Implementation and Configuration Details</a><a class="headerlink" href="#implementation-and-configuration-details" title="Permalink to this heading"></a></h2>
<p>For details on how the <code class="docutils literal notranslate"><span class="pre">gke</span></code> runtime creates processes, see <a class="reference internal" href="../architecture/k8s.html"><span class="doc">How Hydroplane Interacts with Kubernetes</span></a>.</p>
<div class="section" id="authenticating-with-gcp">
<h3><a class="toc-backref" href="#id11">Authenticating with GCP</a><a class="headerlink" href="#authenticating-with-gcp" title="Permalink to this heading"></a></h3>
<p>Hydroplane uses Application Default Credentials (ADC) to connect to GCP. ADC is a strategy that Google’s authentication libraries use to locate credentials and make them available to the various client libraries for GCP services. More information about ADC can be found <a class="reference external" href="https://cloud.google.com/docs/authentication/application-default-credentials">in the GCP docs</a>.</p>
<p>Once you’ve populated ADC on your machine by running <code class="docutils literal notranslate"><span class="pre">gcloud</span> <span class="pre">auth</span> <span class="pre">application-default</span> <span class="pre">login</span></code>, Hydroplane should be able to pick up your credentials automatically. The <code class="docutils literal notranslate"><span class="pre">gke</span></code> runtime will also periodically refresh its credentials, so you shouldn’t need to log in again after you’ve logged in the first time.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="eks.html" class="btn btn-neutral float-left" title="eks - Amazon EKS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../secrets.html" class="btn btn-neutral float-right" title="Defining Secrets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Hydro Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>