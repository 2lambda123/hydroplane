<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Defining Processes &mdash; Hydroplane  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/autodoc_pydantic.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Runtimes" href="runtimes.html" />
    <link rel="prev" title="Configuration" href="settings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Hydroplane
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-hydroplane.html">Interacting with Hydroplane</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Defining Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#process-specifications">Process Specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#process-groups">Process Groups</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#listing-processes">Listing Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#public-and-private-processes">Public and Private Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#process-culling">Process Culling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="runtimes.html">Runtimes</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Defining Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Process Specs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Hydroplane</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Defining Processes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/processes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="defining-processes">
<h1>Defining Processes<a class="headerlink" href="#defining-processes" title="Permalink to this heading"></a></h1>
<p>Hydroplane is responsible for creating and destroying <strong>processes</strong>. Hydroplane defines a process as anything that runs inside a single container.</p>
<div class="section" id="process-specifications">
<h2>Process Specifications<a class="headerlink" href="#process-specifications" title="Permalink to this heading"></a></h2>
<p>When launching a process, you have to provide a <strong>process specification</strong>, or <strong>process spec</strong> for short. A process spec describes the process: it gives the process a name and specifies the location of the process’s container image and how the process’s container should be configured.</p>
<p>Here’s an example of a simple process spec:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;process_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;container&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;image_uri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nginxdemos/hello&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;ports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;container_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;host_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9090</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tcp&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This process spec describes a process named <code class="docutils literal notranslate"><span class="pre">test</span></code> that runs the container image <a class="reference external" href="https://hub.docker.com/r/nginxdemos/hello">nginxdemos/hello</a>, which uses <code class="docutils literal notranslate"><span class="pre">nginx</span></code> to display a simple webpage.</p>
<p>Most of the process spec is optional, but you have the ability to change a lot of the details of how your process runs by changing its process spec. Here’s a detailed description of the process spec’s format:</p>
<span class="target" id="module-hydroplane.models.process_spec"></span><dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.models.process_spec.ProcessSpec">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.process_spec.</span></span><span class="sig-name descname"><span class="pre">ProcessSpec</span></span><a class="headerlink" href="#hydroplane.models.process_spec.ProcessSpec" title="Permalink to this definition"></a></dt>
<dd><p>Provides all the details of the processs that you’d like to launch.</p>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.process_spec.ProcessSpec.process_name">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.process_spec.ProcessSpec.process_name" title="Permalink to this definition"></a></dt>
<dd><p>the name of the process to launch</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.process_spec.ProcessSpec.group">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">group</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.process_spec.ProcessSpec.group" title="Permalink to this definition"></a></dt>
<dd><p>the name of the group to which the process belongs, if any</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.process_spec.ProcessSpec.container">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">container</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#hydroplane.models.container_spec.ContainerSpec" title="hydroplane.models.container_spec.ContainerSpec"><span class="pre">ContainerSpec</span></a></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.process_spec.ProcessSpec.container" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.process_spec.ProcessSpec.has_public_ip">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_public_ip</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#hydroplane.models.process_spec.ProcessSpec.has_public_ip" title="Permalink to this definition"></a></dt>
<dd><p>if true, the process has a publicly-exposed IP</p>
</dd></dl>

</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.container_spec.</span></span><span class="sig-name descname"><span class="pre">ContainerSpec</span></span><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Validators</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits" title="hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">requests_cannot_exceed_limits</span></code></a> » <a class="reference internal" href="#hydroplane.models.container_spec.ContainerSpec.resource_limit" title="hydroplane.models.container_spec.ContainerSpec.resource_limit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">resource_limit</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.image_uri">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">image_uri</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.image_uri" title="Permalink to this definition"></a></dt>
<dd><p>the URI of a Docker image that the process will run. Can be a fully-qualified URI, or as a shorthand (e.g. “python” or “nginxdemos/hello” )</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.username">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">username</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="secrets.html#hydroplane.models.secret.ProcessSecret" title="hydroplane.models.secret.ProcessSecret"><span class="pre">ProcessSecret</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.username" title="Permalink to this definition"></a></dt>
<dd><p>the username used to authenticate with the container registry</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.password">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">password</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="secrets.html#hydroplane.models.secret.ProcessSecret" title="hydroplane.models.secret.ProcessSecret"><span class="pre">ProcessSecret</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.password" title="Permalink to this definition"></a></dt>
<dd><p>the password used to authenticate with the container registry</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.ports">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ports</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydroplane.models.container_spec.PortMapping" title="hydroplane.models.container_spec.PortMapping"><span class="pre">PortMapping</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">[Optional]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.ports" title="Permalink to this definition"></a></dt>
<dd><p>a list of ports that the container should expose</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.env">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydroplane.models.container_spec.EnvironmentVariable" title="hydroplane.models.container_spec.EnvironmentVariable"><span class="pre">EnvironmentVariable</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">[Optional]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.env" title="Permalink to this definition"></a></dt>
<dd><p>a list of environment variables that should be given to the container’s runtime</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.command">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">command</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.command" title="Permalink to this definition"></a></dt>
<dd><p>the command that the container should run</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.resource_request">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">resource_request</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydroplane.models.container_spec.ResourceSpec" title="hydroplane.models.container_spec.ResourceSpec"><span class="pre">ResourceSpec</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.resource_request" title="Permalink to this definition"></a></dt>
<dd><p>a request for physical resources that should be allocated to the container</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.resource_limit">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">resource_limit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydroplane.models.container_spec.ResourceSpec" title="hydroplane.models.container_spec.ResourceSpec"><span class="pre">ResourceSpec</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.resource_limit" title="Permalink to this definition"></a></dt>
<dd><p>a limit on the amount of physical resources that the container is allowed to consume</p>
<dl class="field-list simple">
<dt class="field-odd">Validated by</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits" title="hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">requests_cannot_exceed_limits</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method pydantic_validator">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits">
<em class="property"><span class="pre">validator</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">requests_cannot_exceed_limits</span></span><em class="autodoc_pydantic_validator_arrow property">&#160; <span class="pre">»</span>&#160; </em><a class="reference internal" href="#hydroplane.models.container_spec.ContainerSpec.resource_limit" title="hydroplane.models.container_spec.ContainerSpec.resource_limit"><em class="xref py py-obj"><span class="pre">resource_limit</span></em></a><a class="headerlink" href="#hydroplane.models.container_spec.ContainerSpec.requests_cannot_exceed_limits" title="Permalink to this definition"></a></dt>
<dd><p>If both resource requests and resource limits are specified, ensure that the resource
request doesn’t exceed the resource limit.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-hydroplane.models.container_spec"></span><dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.EnvironmentVariable">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.container_spec.</span></span><span class="sig-name descname"><span class="pre">EnvironmentVariable</span></span><a class="headerlink" href="#hydroplane.models.container_spec.EnvironmentVariable" title="Permalink to this definition"></a></dt>
<dd><p>An environment variable that will be provided to the process’s runtime environment.</p>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.EnvironmentVariable.name">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.EnvironmentVariable.name" title="Permalink to this definition"></a></dt>
<dd><p>the name of the environment variable</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.EnvironmentVariable.value">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="secrets.html#hydroplane.models.secret.ProcessSecret" title="hydroplane.models.secret.ProcessSecret"><span class="pre">ProcessSecret</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.EnvironmentVariable.value" title="Permalink to this definition"></a></dt>
<dd><p>the environment variable’s value; can be a literal, or a reference to a secret</p>
</dd></dl>

</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.container_spec.</span></span><span class="sig-name descname"><span class="pre">PortMapping</span></span><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping" title="Permalink to this definition"></a></dt>
<dd><p>A port inside the container that will be exposed to the outside world.</p>
<dl class="field-list simple">
<dt class="field-odd">Validators</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#hydroplane.models.container_spec.PortMapping.default_host_port" title="hydroplane.models.container_spec.PortMapping.default_host_port"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_host_port</span></code></a> » <a class="reference internal" href="#hydroplane.models.container_spec.PortMapping.host_port" title="hydroplane.models.container_spec.PortMapping.host_port"><code class="xref py py-obj docutils literal notranslate"><span class="pre">host_port</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping.container_port">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">container_port</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ConstrainedIntValue</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping.container_port" title="Permalink to this definition"></a></dt>
<dd><p>the port that the container will be listening on</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minimum</strong> = 1</p></li>
<li><p><strong>maximum</strong> = 65535</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping.host_port">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host_port</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ConstrainedIntValue</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping.host_port" title="Permalink to this definition"></a></dt>
<dd><p>the port that the host will expose. Some runtimes may not honor this setting.</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minimum</strong> = 1</p></li>
<li><p><strong>maximum</strong> = 65535</p></li>
</ul>
</dd>
<dt class="field-even">Validated by</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#hydroplane.models.container_spec.PortMapping.default_host_port" title="hydroplane.models.container_spec.PortMapping.default_host_port"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_host_port</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping.protocol">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">protocol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydroplane.models.container_spec.PortProtocol" title="hydroplane.models.container_spec.PortProtocol"><span class="pre">PortProtocol</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">PortProtocol.TCP</span></em><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping.protocol" title="Permalink to this definition"></a></dt>
<dd><p>the protocol spoken by the bound port</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping.name">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping.name" title="Permalink to this definition"></a></dt>
<dd><p>the name of the port binding; passed to some runtimes</p>
</dd></dl>

<dl class="py method pydantic_validator">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortMapping.default_host_port">
<em class="property"><span class="pre">validator</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_host_port</span></span><em class="autodoc_pydantic_validator_arrow property">&#160; <span class="pre">»</span>&#160; </em><a class="reference internal" href="#hydroplane.models.container_spec.PortMapping.host_port" title="hydroplane.models.container_spec.PortMapping.host_port"><em class="xref py py-obj"><span class="pre">host_port</span></em></a><a class="headerlink" href="#hydroplane.models.container_spec.PortMapping.default_host_port" title="Permalink to this definition"></a></dt>
<dd><p>If the host port isn’t specified, set it to the container port.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.PortProtocol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.container_spec.</span></span><span class="sig-name descname"><span class="pre">PortProtocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hydroplane.models.container_spec.PortProtocol" title="Permalink to this definition"></a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ResourceSpec">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.models.container_spec.</span></span><span class="sig-name descname"><span class="pre">ResourceSpec</span></span><a class="headerlink" href="#hydroplane.models.container_spec.ResourceSpec" title="Permalink to this definition"></a></dt>
<dd><p>Encapsulates either a request or limit on the physical resources allocated to a process by
the runtime.</p>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ResourceSpec.cpu_vcpu">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cpu_vcpu</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ConstrainedDecimalValue</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ResourceSpec.cpu_vcpu" title="Permalink to this definition"></a></dt>
<dd><p>the number of abstract vCPUs</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minimum</strong> = 0.001</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.models.container_spec.ResourceSpec.memory_mib">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_mib</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ConstrainedIntValue</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#hydroplane.models.container_spec.ResourceSpec.memory_mib" title="Permalink to this definition"></a></dt>
<dd><p>the number of MiB of memory</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minimum</strong> = 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="process-groups">
<h3>Process Groups<a class="headerlink" href="#process-groups" title="Permalink to this heading"></a></h3>
<p>A process can optionally be made part of a process <strong>group</strong> when it’s created by setting the <code class="docutils literal notranslate"><span class="pre">group</span></code> field of the process spec. Hydroplane knows how to list the processes that are part of a group, as well as how to destroy a group of processes all at once.</p>
</div>
</div>
<div class="section" id="listing-processes">
<h2>Listing Processes<a class="headerlink" href="#listing-processes" title="Permalink to this heading"></a></h2>
<p>The Hydroplane server itself is stateless, but it can interrogate its runtime to list running processes. The way that the runtime is interrogated varies, but usually Hydroplane annotates the resources it manages with tags and uses those tags to distinguish processes it manages from other resources in the runtime.</p>
</div>
<div class="section" id="public-and-private-processes">
<h2>Public and Private Processes<a class="headerlink" href="#public-and-private-processes" title="Permalink to this heading"></a></h2>
<p>By default, processes are private, meaning that they can communicate with one another (and often other services running in that runtime) but cannot communicate with the outside world.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">has_public_ip</span></code> field of the process spec controls whether a process is public or private. If the field is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the service will be publicly routable, and its public IP address will be provided instead of its private one(s) when it’s listed.</p>
</div>
<div class="section" id="process-culling">
<span id="process-culler"></span><h2>Process Culling<a class="headerlink" href="#process-culling" title="Permalink to this heading"></a></h2>
<p>If you’re running experiments in the cloud, running processes cost money, so you want to make sure you don’t leave processes sitting around accidentally. Hydroplane has a <strong>process culler</strong> that automatically stops any processes that are older than a certain age (specified in minutes).</p>
<p>The process culler’s settings are described below. Here’s an example configuration file showing process culler configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="nt">secret_store</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">secret_store_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">none</span><span class="w"></span>

<span class="nt">runtime</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">runtime_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span><span class="w"></span>

<span class="nt">process_culling</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Cull all processes older than two hours</span><span class="w"></span>
<span class="w">  </span><span class="nt">max_age_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span><span class="w"></span>

<span class="w">  </span><span class="c1"># Cull processes every 5 minutes</span><span class="w"></span>
<span class="w">  </span><span class="nt">culling_interval_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w"></span>
</pre></div>
</div>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="hydroplane.utils.process_culler.Settings">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hydroplane.utils.process_culler.</span></span><span class="sig-name descname"><span class="pre">Settings</span></span><a class="headerlink" href="#hydroplane.utils.process_culler.Settings" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.utils.process_culler.Settings.max_age_minutes">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_age_minutes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#hydroplane.utils.process_culler.Settings.max_age_minutes" title="Permalink to this definition"></a></dt>
<dd><p>the maximum number of minutes that a process should be allowed to run</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="hydroplane.utils.process_culler.Settings.culling_interval_minutes">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">culling_interval_minutes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#hydroplane.utils.process_culler.Settings.culling_interval_minutes" title="Permalink to this definition"></a></dt>
<dd><p>the frequency, in minutes, with which the process culler runs</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="settings.html" class="btn btn-neutral float-left" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="runtimes.html" class="btn btn-neutral float-right" title="Runtimes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Hydro Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>